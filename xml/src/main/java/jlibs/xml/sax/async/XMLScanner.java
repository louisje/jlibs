package jlibs.xml.sax.async;

import java.io.IOException;

/**
 * DON'T EDIT THIS FILE. THIS IS GENERATED BY JLIBS
 *
 * @author Santhosh Kumar T
 */
public final class XMLScanner extends jlibs.nbp.NBParser{

    private static final int STRING_IDS[][] = {
        {}, // dummy one
        {110, 111}, // no
        {121, 101, 115}, // yes
        {115, 116, 97, 110, 100, 97, 108, 111, 110, 101}, // standalone
        {101, 110, 99, 111, 100, 105, 110, 103}, // encoding
        {118, 101, 114, 115, 105, 111, 110}, // version
        {60, 33, 45, 45}, // <!--
        {60, 33, 91, 67, 68, 65, 84, 65, 91}, // <![CDATA[
        {67, 68, 65, 84, 65}, // CDATA
        {60, 63, 120, 109, 108}, // <?xml
        {83, 89, 83, 84, 69, 77}, // SYSTEM
        {80, 85, 66, 76, 73, 67}, // PUBLIC
        {78, 79, 84, 65, 84, 73, 79, 78}, // NOTATION
        {78, 68, 65, 84, 65}, // NDATA
        {69, 78, 84, 73, 84, 89}, // ENTITY
        {69, 78, 84, 73, 84}, // ENTIT
        {78, 77, 84, 79, 75, 69, 78}, // NMTOKEN
        {35, 80, 67, 68, 65, 84, 65}, // #PCDATA
        {82, 69, 81, 85, 73, 82, 69, 68}, // REQUIRED
        {73, 77, 80, 76, 73, 69, 68}, // IMPLIED
        {70, 73, 88, 69, 68}, // FIXED
        {65, 84, 84, 76, 73, 83, 84}, // ATTLIST
        {69, 76, 69, 77, 69, 78, 84}, // ELEMENT
        {69, 77, 80, 84, 89}, // EMPTY
        {65, 78, 89}, // ANY
        {68, 79, 67, 84, 89, 80, 69}, // DOCTYPE
        {73, 71, 78, 79, 82, 69}, // IGNORE
        {73, 78, 67, 76, 85, 68, 69}, // INCLUDE
    };

    public static final int RULE_STR_NO = -1;
    public static final int RULE_STR_YES = -2;
    public static final int RULE_STR_STANDALONE = -3;
    public static final int RULE_STR_ENCODING = -4;
    public static final int RULE_STR_VERSION = -5;
    public static final int RULE_STR_COMMENT_START = -6;
    public static final int RULE_STR_CDATA_START = -7;
    public static final int RULE_STR_CDATA = -8;
    public static final int RULE_STR_XML = -9;
    public static final int RULE_STR_SYSTEM = -10;
    public static final int RULE_STR_PUBLIC = -11;
    public static final int RULE_STR_NOTATION = -12;
    public static final int RULE_STR_NDATA = -13;
    public static final int RULE_STR_ENTITY = -14;
    public static final int RULE_STR_ENTIT = -15;
    public static final int RULE_STR_NMTOKEN = -16;
    public static final int RULE_STR_HASH_PCDATA = -17;
    public static final int RULE_STR_REQUIRED = -18;
    public static final int RULE_STR_IMPLIED = -19;
    public static final int RULE_STR_FIXED = -20;
    public static final int RULE_STR_ATTLIST = -21;
    public static final int RULE_STR_ELEMENT = -22;
    public static final int RULE_STR_EMPTY = -23;
    public static final int RULE_STR_ANY = -24;
    public static final int RULE_STR_DOCTYPE = -25;
    public static final int RULE_STR_IGNORE = -26;
    public static final int RULE_STR_INCLUDE = -27;

    /*-------------------------------------------------[ Matchers ]---------------------------------------------------*/

    private static boolean DIGIT(int ch){
        return ch>='0' && ch<='9';
    }

    private static boolean HEX_DIGIT(int ch){
        return (DIGIT(ch)) || (ch>='a' && ch<='f') || (ch>='A' && ch<='F');
    }

    private static boolean ENCODING_START(int ch){
        return (ch>='A' && ch<='Z') || (ch>='a' && ch<='z');
    }

    private static boolean ENCODING_PART(int ch){
        return (ENCODING_START(ch)) || (DIGIT(ch)) || (ch=='.' || ch=='_' || ch=='-');
    }

    private static boolean ELEM_CONTENT_CHAR(int ch){
        return (org.apache.xerces.util.XMLChar.isValid(ch)) && (ch!='<' && ch!='&');
    }

    private static boolean ATTR_Q_CONTENT(int ch){
        return (org.apache.xerces.util.XMLChar.isValid(ch)) && (ch!='<' && ch!='&' && ch!='\'');
    }

    private static boolean ATTR_DQ_CONTENT(int ch){
        return (org.apache.xerces.util.XMLChar.isValid(ch)) && (ch!='<' && ch!='&' && ch!='"');
    }

    private static boolean ENTITY_CONTENT(int ch){
        return (org.apache.xerces.util.XMLChar.isValid(ch)) && (ch!='%' && ch!='&');
    }

    private static boolean ENTITY_Q_CONTENT(int ch){
        return (org.apache.xerces.util.XMLChar.isValid(ch)) && (ch!='%' && ch!='&' && ch!='\'');
    }

    private static boolean ENTITY_DQ_CONTENT(int ch){
        return (org.apache.xerces.util.XMLChar.isValid(ch)) && (ch!='%' && ch!='&' && ch!='"');
    }

    /*-------------------------------------------------[ Rules ]---------------------------------------------------*/

    public static final int RULE_EQ = 0;
    private boolean eq(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=finishAll_WS(codePoint()))==EOC){
                    exiting(RULE_EQ, 0);
                    return false;
                }
                if(ch=='='){
                    position++;
                }
                else expected(ch, "<WS> OR [=]");
            case 1:
                if(finishAll_WS(codePoint())==EOC){
                    exiting(RULE_EQ, 1);
                    return false;
                }
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_YES_NO = 1;
    private boolean yes_no(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_YES_NO, 0);
                    return false;
                }
                if(ch=='n'){
                    buffer.push();
                    if(!matchString(RULE_STR_NO, 0, STRING_IDS[-RULE_STR_NO])){
                        exiting(RULE_YES_NO, 1);
                        return false;
                    }
                }
                else {
                    buffer.push();
                    if(!matchString(RULE_STR_YES, 0, STRING_IDS[-RULE_STR_YES])){
                        exiting(RULE_YES_NO, 1);
                        return false;
                    }
                }
            case 1:
                handler.standalone(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_SD_DECL = 2;
    private boolean sd_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if(!matchString(RULE_STR_STANDALONE, 0, STRING_IDS[-RULE_STR_STANDALONE])){
                        exiting(RULE_SD_DECL, 1);
                        return false;
                    }
                case 1:
                    if(!eq(0)){
                        exiting(RULE_SD_DECL, 2);
                        return false;
                    }
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_SD_DECL, 2);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch=='"'){
                        position++;
                    }
                    else expected(ch, "<Q> OR <DQ>");
                case 3:
                    if(!yes_no(0)){
                        exiting(RULE_SD_DECL, 4);
                        return false;
                    }
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_SD_DECL, 4);
                        return false;
                    }
                    if(ch=='"'){
                        position++;
                        return true;
                    }
                    else expected(ch, "<DQ>");
                case 5:
                    if(!yes_no(0)){
                        exiting(RULE_SD_DECL, 6);
                        return false;
                    }
                case 6:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_SD_DECL, 6);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        return true;
                    }
                    else expected(ch, "<Q>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_ENC_NAME = 3;
    private boolean enc_name(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_ENC_NAME, 0);
                    return false;
                }
                if(ENCODING_START(ch)){
                    buffer.push();
                    buffer.append(input[position++]);
                }
                else expected(ch, "<ENCODING_START>");
            case 1:
                if(finishAll_ENCODING_PART()==EOC){
                    exiting(RULE_ENC_NAME, 1);
                    return false;
                }
                handler.encoding(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_ENC_DECL = 4;
    private boolean enc_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if(!matchString(RULE_STR_ENCODING, 0, STRING_IDS[-RULE_STR_ENCODING])){
                        exiting(RULE_ENC_DECL, 1);
                        return false;
                    }
                case 1:
                    if(!eq(0)){
                        exiting(RULE_ENC_DECL, 2);
                        return false;
                    }
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENC_DECL, 2);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch=='"'){
                        position++;
                    }
                    else expected(ch, "<Q> OR <DQ>");
                case 3:
                    if(!enc_name(0)){
                        exiting(RULE_ENC_DECL, 4);
                        return false;
                    }
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENC_DECL, 4);
                        return false;
                    }
                    if(ch=='"'){
                        position++;
                        return true;
                    }
                    else expected(ch, "<DQ>");
                case 5:
                    if(!enc_name(0)){
                        exiting(RULE_ENC_DECL, 6);
                        return false;
                    }
                case 6:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENC_DECL, 6);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        return true;
                    }
                    else expected(ch, "<Q>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_VERSION_NUM = 5;
    private boolean version_num(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_VERSION_NUM, 0);
                    return false;
                }
                if(ch=='1'){
                    buffer.push();
                    buffer.append(input[position++]);
                }
                else expected(ch, "[1]");
            case 1:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_VERSION_NUM, 1);
                    return false;
                }
                if(ch=='.'){
                    buffer.append(input[position++]);
                }
                else expected(ch, "[\\.]");
            case 2:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_VERSION_NUM, 2);
                    return false;
                }
                if(DIGIT(ch)){
                    buffer.append(input[position++]);
                }
                else expected(ch, "<DIGIT>");
            case 3:
                if(finishAll_DIGIT()==EOC){
                    exiting(RULE_VERSION_NUM, 3);
                    return false;
                }
                handler.version(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_VERSION_INFO = 6;
    private boolean version_info(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if(!matchString(RULE_STR_VERSION, 0, STRING_IDS[-RULE_STR_VERSION])){
                        exiting(RULE_VERSION_INFO, 1);
                        return false;
                    }
                case 1:
                    if(!eq(0)){
                        exiting(RULE_VERSION_INFO, 2);
                        return false;
                    }
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_VERSION_INFO, 2);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch=='"'){
                        position++;
                    }
                    else expected(ch, "<Q> OR <DQ>");
                case 3:
                    if(!version_num(0)){
                        exiting(RULE_VERSION_INFO, 4);
                        return false;
                    }
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_VERSION_INFO, 4);
                        return false;
                    }
                    if(ch=='"'){
                        position++;
                        return true;
                    }
                    else expected(ch, "<DQ>");
                case 5:
                    if(!version_num(0)){
                        exiting(RULE_VERSION_INFO, 6);
                        return false;
                    }
                case 6:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_VERSION_INFO, 6);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        return true;
                    }
                    else expected(ch, "<Q>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_COMMENT = 7;
    private boolean comment(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if(!matchString(RULE_STR_COMMENT_START, 0, STRING_IDS[-RULE_STR_COMMENT_START])){
                        exiting(RULE_COMMENT, 1);
                        return false;
                    }
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_COMMENT, 1);
                        return false;
                    }
                    if(ch=='-'){
                        buffer.push();
                        buffer.append(input[position++]);
                        state = 3;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        buffer.push();
                        consume(ch);
                    }
                    else expected(ch, "<DASH> OR <CHAR>");
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_COMMENT, 2);
                        return false;
                    }
                    if(ch=='-'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "<DASH> OR <CHAR>");
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_COMMENT, 3);
                        return false;
                    }
                    if(ch=='-'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "<DASH> OR <CHAR>");
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_COMMENT, 4);
                        return false;
                    }
                    if(ch=='>'){
                        buffer.append(input[position++]);
                        handler.comment(buffer.pop(0, 3));
                        return true;
                    }
                    else expected(ch, "[>]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_CDATA_END = 8;
    private boolean cdata_end(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CDATA_END, 0);
                        return false;
                    }
                    if(ch==']'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 0;
                        continue;
                    }
                    else expected(ch, "<BRACKET_CLOSE> OR <CHAR>");
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CDATA_END, 1);
                        return false;
                    }
                    if(ch==']'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 0;
                        continue;
                    }
                    else expected(ch, "<BRACKET_CLOSE> OR <CHAR>");
                case 2:
                    if((ch=finishAll(codePoint(), ']'))==EOC){
                        exiting(RULE_CDATA_END, 2);
                        return false;
                    }
                    if(ch=='>'){
                        buffer.append(input[position++]);
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 0;
                        continue;
                    }
                    else expected(ch, "<BRACKET_CLOSE> OR <GT> OR <CHAR>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_CDATA = 9;
    private boolean cdata(int state) throws Exception{
        switch(state){
            case 0:
                if(!matchString(RULE_STR_CDATA_START, 0, STRING_IDS[-RULE_STR_CDATA_START])){
                    exiting(RULE_CDATA, 1);
                    return false;
                }
            case 1:
                buffer.push();
                if(!cdata_end(0)){
                    exiting(RULE_CDATA, 2);
                    return false;
                }
            case 2:
                handler.cdata(buffer.pop(0, 3));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_NAME = 10;
    private boolean name(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=codePoint())==EOC){
                    exiting(RULE_NAME, 0);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                    consume(ch);
                }
                else expected(ch, "<NAME_START>");
            case 1:
                if(finishAll_NAME_PART(codePoint())==EOC){
                    exiting(RULE_NAME, 1);
                    return false;
                }
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_PI_TARGET = 11;
    private boolean pi_target(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PI_TARGET, 0);
                        return false;
                    }
                    if(ch=='x' || ch=='X'){
                        buffer.append(input[position++]);
                        state = 2;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCNameStart(ch)){
                        buffer.append(input[position++]);
                    }
                    else expected(ch, "[xX] OR <NCNAME_START>");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PI_TARGET, 1);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCName(ch)){
                        buffer.append(input[position++]);
                        state = 1;
                        continue;
                    }
                    else {
                        return true;
                    }
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PI_TARGET, 2);
                        return false;
                    }
                    if(ch=='m' || ch=='M'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCName(ch)){
                        buffer.append(input[position++]);
                        state = 1;
                        continue;
                    }
                    else {
                        return true;
                    }
                case 3:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PI_TARGET, 3);
                        return false;
                    }
                    if(ch=='l' || ch=='L'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCName(ch)){
                        buffer.append(input[position++]);
                        state = 1;
                        continue;
                    }
                    else {
                        return true;
                    }
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PI_TARGET, 4);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCName(ch)){
                        buffer.append(input[position++]);
                        state = 1;
                        continue;
                    }
                    else expected(ch, "<NCNAME_PART>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_PI = 12;
    private boolean pi(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PI, 0);
                        return false;
                    }
                    if(ch=='<'){
                        position++;
                    }
                    else expected(ch, "[<]");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PI, 1);
                        return false;
                    }
                    if(ch=='?'){
                        position++;
                    }
                    else expected(ch, "[?]");
                case 2:
                    buffer.push();
                    if(!pi_target(0)){
                        exiting(RULE_PI, 3);
                        return false;
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_PI, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.piTarget(buffer.pop(0, 0));
                        consume(ch);
                        state = 5;
                        continue;
                    }
                    else if(ch=='?'){
                        handler.piTarget(buffer.pop(0, 0));
                        handler.piData();
                        position++;
                    }
                    else expected(ch, "<WS> OR [?]");
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PI, 4);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        return true;
                    }
                    else expected(ch, "[>]");
                case 5:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_PI, 5);
                        return false;
                    }
                    if(ch=='?'){
                        buffer.push();
                        buffer.append(input[position++]);
                        state = 7;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        buffer.push();
                        consume(ch);
                    }
                    else expected(ch, "<WS> OR [?] OR <CHAR>");
                case 6:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_PI, 6);
                        return false;
                    }
                    if(ch=='?'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 6;
                        continue;
                    }
                    else expected(ch, "[?] OR <CHAR>");
                case 7:
                    if((ch=finishAll(codePoint(), '?'))==EOC){
                        exiting(RULE_PI, 7);
                        return false;
                    }
                    if(ch=='>'){
                        handler.piData(buffer.pop(0, 1));
                        position++;
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 6;
                        continue;
                    }
                    else expected(ch, "[?] OR [>] OR <CHAR>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_NCNAME = 13;
    private boolean ncname(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_NCNAME, 0);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCNameStart(ch)){
                    buffer.append(input[position++]);
                }
                else expected(ch, "<NCNAME_START>");
            case 1:
                if(finishAll_NCNAME_PART()==EOC){
                    exiting(RULE_NCNAME, 1);
                    return false;
                }
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_QNAME = 14;
    private boolean qname(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                buffer.push();
                buffer.push();
                if(!ncname(0)){
                    exiting(RULE_QNAME, 1);
                    return false;
                }
            case 1:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_QNAME, 1);
                    return false;
                }
                if(ch==':'){
                    handler.prefix(buffer.pop(0, 0));
                    buffer.append(input[position++]);
                }
                else {
                    buffer.pop(0, 0);
                    handler.qname(buffer.pop(0, 0));
                    return true;
                }
            case 2:
                if(!ncname(0)){
                    exiting(RULE_QNAME, 3);
                    return false;
                }
            case 3:
                handler.qname(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_REFERENCE = 15;
    private boolean reference(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_REFERENCE, 0);
                        return false;
                    }
                    if(ch=='&'){
                        position++;
                    }
                    else expected(ch, "[\\&]");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_REFERENCE, 1);
                        return false;
                    }
                    if(ch=='#'){
                        position++;
                        state = 3;
                        continue;
                    }
                    else {
                        buffer.push();
                        if(!name(0)){
                            exiting(RULE_REFERENCE, 2);
                            return false;
                        }
                    }
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_REFERENCE, 2);
                        return false;
                    }
                    if(ch==';'){
                        buffer.append(input[position++]);
                        handler.entityReference(buffer.pop(0, 1));
                        return !stop;
                    }
                    else expected(ch, "[;]");
                case 3:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_REFERENCE, 3);
                        return false;
                    }
                    if(ch=='x'){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(DIGIT(ch)){
                        buffer.push();
                        buffer.append(input[position++]);
                    }
                    else expected(ch, "[x] OR <DIGIT>");
                case 4:
                    if((ch=finishAll_DIGIT())==EOC){
                        exiting(RULE_REFERENCE, 4);
                        return false;
                    }
                    if(ch==';'){
                        handler.asciiCode(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else expected(ch, "<DIGIT> OR [;]");
                case 5:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_REFERENCE, 5);
                        return false;
                    }
                    if(HEX_DIGIT(ch)){
                        buffer.push();
                        buffer.append(input[position++]);
                    }
                    else expected(ch, "<HEX_DIGIT>");
                case 6:
                    if((ch=finishAll_HEX_DIGIT())==EOC){
                        exiting(RULE_REFERENCE, 6);
                        return false;
                    }
                    if(ch==';'){
                        handler.hexCode(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else expected(ch, "<HEX_DIGIT> OR [;]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_ATTR = 16;
    private boolean attr(int state) throws Exception{
        switch(state){
            case 0:
                if(!qname(0)){
                    exiting(RULE_ATTR, 1);
                    return false;
                }
            case 1:
                if(!eq(0)){
                    exiting(RULE_ATTR, 2);
                    return false;
                }
            case 2:
                if(!value(0)){
                    exiting(RULE_ATTR, 3);
                    return false;
                }
            case 3:
                handler.attributeEnd();
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_VALUE = 17;
    private boolean value(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_VALUE, 0);
                        return false;
                    }
                    if(ch=='\''){
                        handler.valueStart();
                        position++;
                        state = 2;
                        continue;
                    }
                    else if(ch=='"'){
                        handler.valueStart();
                        position++;
                    }
                    else expected(ch, "<Q> OR <DQ>");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_VALUE, 1);
                        return false;
                    }
                    if(ch=='"'){
                        position++;
                        handler.valueEnd();
                        return true;
                    }
                    else {
                        if(dq_value(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_VALUE, 1);
                            return false;
                        }
                    }
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_VALUE, 2);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        handler.valueEnd();
                        return true;
                    }
                    else {
                        if(q_value(0)){
                            state = 2;
                            continue;
                        }else{
                            exiting(RULE_VALUE, 2);
                            return false;
                        }
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_Q_VALUE = 18;
    private boolean q_value(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=codePoint())==EOC){
                    exiting(RULE_Q_VALUE, 0);
                    return false;
                }
                if(ch!=EOF && ATTR_Q_CONTENT(ch)){
                    buffer.push();
                    consume(ch);
                }
                else {
                    return reference(0);
                }
            case 1:
                if(finishAll_ATTR_Q_CONTENT(codePoint())==EOC){
                    exiting(RULE_Q_VALUE, 1);
                    return false;
                }
                handler.rawValue(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_DQ_VALUE = 19;
    private boolean dq_value(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=codePoint())==EOC){
                    exiting(RULE_DQ_VALUE, 0);
                    return false;
                }
                if(ch!=EOF && ATTR_DQ_CONTENT(ch)){
                    buffer.push();
                    consume(ch);
                }
                else {
                    return reference(0);
                }
            case 1:
                if(finishAll_ATTR_DQ_CONTENT(codePoint())==EOC){
                    exiting(RULE_DQ_VALUE, 1);
                    return false;
                }
                handler.rawValue(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_ELEM_ATTRS = 20;
    private boolean elem_attrs(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ELEM_ATTRS, 0);
                        return false;
                    }
                    if(ch=='<'){
                        position++;
                    }
                    else expected(ch, "[<]");
                case 1:
                    if(!qname(0)){
                        exiting(RULE_ELEM_ATTRS, 2);
                        return false;
                    }
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEM_ATTRS, 2);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.attributesStart();
                        consume(ch);
                    }
                    else {
                        handler.attributesStart();
                        return true;
                    }
                case 3:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ELEM_ATTRS, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCNameStart(ch)){
                        if(!attr(0)){
                            exiting(RULE_ELEM_ATTRS, 4);
                            return false;
                        }
                    }
                    else {
                        return true;
                    }
                case 4:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEM_ATTRS, 4);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 3;
                        continue;
                    }
                    else {
                        return true;
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_ELEM_CONTENT = 21;
    private boolean elem_content(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEM_CONTENT, 0);
                        return false;
                    }
                    if(ch==']'){
                        buffer.push();
                        buffer.append(input[position++]);
                        state = 2;
                        continue;
                    }
                    if(ch=='&'){
                        return reference(0);
                    }
                    if(ch!=EOF && ELEM_CONTENT_CHAR(ch)){
                        buffer.push();
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_ELEM_CONTENT, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCNameStart(ch)){
                                resetLookAhead();
                                return elem(0);
                            }
                            if(ch=='?'){
                                resetLookAhead();
                                return pi(0);
                            }
                        }
                    }
                    if(ch!=EOF && laLen<3){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_ELEM_CONTENT, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==3){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(ch=='-'){
                                    resetLookAhead();
                                    return comment(0);
                                }
                                if(ch=='['){
                                    resetLookAhead();
                                    return cdata(0);
                                }
                            }
                        }
                    }
                    expected(ch, "[\\]] OR [\\&] OR <ELEM_CONTENT_CHAR> OR [<]<NCNAME_START> OR [<][?] OR [<][!][\\-] OR [<][!][\\[]");
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEM_CONTENT, 1);
                        return false;
                    }
                    if(ch==']'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && ELEM_CONTENT_CHAR(ch)){
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    else {
                        handler.characters(buffer.pop(0, 0));
                        return true;
                    }
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEM_CONTENT, 2);
                        return false;
                    }
                    if(ch==']'){
                        buffer.append(input[position++]);
                    }
                    else if(ch!=EOF && ELEM_CONTENT_CHAR(ch)){
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    else {
                        handler.characters(buffer.pop(0, 0));
                        return true;
                    }
                case 3:
                    if((ch=finishAll(codePoint(), ']'))==EOC){
                        exiting(RULE_ELEM_CONTENT, 3);
                        return false;
                    }
                    if(ch=='>'){
                        buffer.append(input[position++]);
                        handler.fatalError("Text may not contain a literal ']]>' sequence");
                        return true;
                    }
                    else if(ch!=EOF && ELEM_CONTENT_CHAR(ch)){
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    else {
                        handler.characters(buffer.pop(0, 0));
                        return true;
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_ELEM = 22;
    private boolean elem(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if(!elem_attrs(0)){
                        exiting(RULE_ELEM, 1);
                        return false;
                    }
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ELEM, 1);
                        return false;
                    }
                    if(ch=='/'){
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch=='>'){
                        handler.attributesEnd();
                        position++;
                    }
                    else expected(ch, "[/] OR [>]");
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ELEM, 2);
                        return false;
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_ELEM, 2);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch=='/'){
                                consume(FROM_LA);
                                state = 3;
                                resetLookAhead();
                                continue;
                            }
                        }
                    }
                    resetLookAhead();
                    if(elem_content(0)){
                        state = 2;
                        continue;
                    }else{
                        exiting(RULE_ELEM, 2);
                        return false;
                    }
                case 3:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ELEM, 3);
                        return false;
                    }
                    if(ch=='/'){
                        handler.endingElem();
                        position++;
                    }
                    else expected(ch, "[/]");
                case 4:
                    if(!matchString(0, dynamicStringToBeMatched)){
                        exiting(RULE_ELEM, 5);
                        return false;
                    }
                case 5:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ELEM, 5);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        handler.elementEnd();
                        return true;
                    }
                    else expected(ch, "<WS> OR [>]");
                case 6:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ELEM, 6);
                        return false;
                    }
                    if(ch=='>'){
                        handler.attributesEnd();
                        position++;
                        handler.elementEnd();
                        return true;
                    }
                    else expected(ch, "[>]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_XDECL = 23;
    private boolean xdecl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if(!matchString(RULE_STR_XML, 0, STRING_IDS[-RULE_STR_XML])){
                        exiting(RULE_XDECL, 1);
                        return false;
                    }
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_XDECL, 1);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 2:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_XDECL, 2);
                        return false;
                    }
                    if(!version_info(0)){
                        exiting(RULE_XDECL, 3);
                        return false;
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_XDECL, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 5;
                        continue;
                    }
                    else if(ch=='?'){
                        position++;
                    }
                    else expected(ch, "<WS> OR [?]");
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_XDECL, 4);
                        return false;
                    }
                    if(ch=='>'){
                        handler.xdeclEnd();
                        position++;
                        return true;
                    }
                    else expected(ch, "[>]");
                case 5:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_XDECL, 5);
                        return false;
                    }
                    if(ch=='e'){
                        if(enc_decl(0)){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_XDECL, 7);
                            return false;
                        }
                    }
                    else if(ch=='?'){
                        position++;
                        state = 4;
                        continue;
                    }
                    else {
                        if(!sd_decl(0)){
                            exiting(RULE_XDECL, 6);
                            return false;
                        }
                    }
                case 6:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_XDECL, 6);
                        return false;
                    }
                    if(ch=='?'){
                        position++;
                        state = 4;
                        continue;
                    }
                    else expected(ch, "<WS> OR [?]");
                case 7:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_XDECL, 7);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else if(ch=='?'){
                        position++;
                        state = 4;
                        continue;
                    }
                    else expected(ch, "<WS> OR [?]");
                case 8:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_XDECL, 8);
                        return false;
                    }
                    if(ch=='?'){
                        position++;
                        state = 4;
                        continue;
                    }
                    else {
                        if(sd_decl(0)){
                            state = 6;
                            continue;
                        }else{
                            exiting(RULE_XDECL, 6);
                            return false;
                        }
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_MISC = 24;
    private boolean misc(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MISC, 0);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_MISC, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch=='!'){
                                resetLookAhead();
                                return comment(0);
                            }
                            if(ch=='?'){
                                resetLookAhead();
                                return pi(0);
                            }
                        }
                    }
                    expected(ch, "<WS> OR [<][!] OR [<][?]");
                case 1:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_MISC, 1);
                        return false;
                    }
                    return true;
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_SYTEM_LITERAL = 25;
    private boolean sytem_literal(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_SYTEM_LITERAL, 0);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        buffer.push();
                        state = 2;
                        continue;
                    }
                    else if(ch=='"'){
                        position++;
                        buffer.push();
                    }
                    else expected(ch, "<Q> OR <DQ>");
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_SYTEM_LITERAL, 1);
                        return false;
                    }
                    if(ch=='"'){
                        handler.systemID(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    else expected(ch, "<DQ> OR <CHAR>");
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_SYTEM_LITERAL, 2);
                        return false;
                    }
                    if(ch=='\''){
                        handler.systemID(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "<Q> OR <CHAR>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_PUBID_LITERAL = 26;
    private boolean pubid_literal(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_PUBID_LITERAL, 0);
                        return false;
                    }
                    if(ch=='"'){
                        position++;
                        buffer.push();
                        state = 2;
                        continue;
                    }
                    else if(ch=='\''){
                        position++;
                        buffer.push();
                    }
                    else expected(ch, "<DQ> OR <Q>");
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_PUBID_LITERAL, 1);
                        return false;
                    }
                    if(ch=='\''){
                        handler.publicID(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isPubid(ch)){
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    else expected(ch, "<Q> OR <PUBID_CHAR>");
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_PUBID_LITERAL, 2);
                        return false;
                    }
                    if(ch=='"'){
                        handler.publicID(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isPubid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "<DQ> OR <PUBID_CHAR>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_SYSTEM_ID = 27;
    private boolean system_id(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if(!matchString(RULE_STR_SYSTEM, 0, STRING_IDS[-RULE_STR_SYSTEM])){
                    exiting(RULE_SYSTEM_ID, 1);
                    return false;
                }
            case 1:
                if((ch=codePoint())==EOC){
                    exiting(RULE_SYSTEM_ID, 1);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                    consume(ch);
                }
                else expected(ch, "<WS>");
            case 2:
                if(finishAll_WS(codePoint())==EOC){
                    exiting(RULE_SYSTEM_ID, 2);
                    return false;
                }
                return sytem_literal(0);
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_PUBLIC_ID = 28;
    private boolean public_id(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if(!matchString(RULE_STR_PUBLIC, 0, STRING_IDS[-RULE_STR_PUBLIC])){
                    exiting(RULE_PUBLIC_ID, 1);
                    return false;
                }
            case 1:
                if((ch=codePoint())==EOC){
                    exiting(RULE_PUBLIC_ID, 1);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                    consume(ch);
                }
                else expected(ch, "<WS>");
            case 2:
                if(finishAll_WS(codePoint())==EOC){
                    exiting(RULE_PUBLIC_ID, 2);
                    return false;
                }
                return pubid_literal(0);
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_NOTATION_DECL = 29;
    private boolean notation_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_NOTATION_DECL, 0);
                        return false;
                    }
                    if(ch=='<'){
                        position++;
                    }
                    else expected(ch, "[<]");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_NOTATION_DECL, 1);
                        return false;
                    }
                    if(ch=='!'){
                        position++;
                    }
                    else expected(ch, "[!]");
                case 2:
                    if(!matchString(RULE_STR_NOTATION, 0, STRING_IDS[-RULE_STR_NOTATION])){
                        exiting(RULE_NOTATION_DECL, 3);
                        return false;
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_NOTATION_DECL, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 4:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_NOTATION_DECL, 4);
                        return false;
                    }
                    buffer.push();
                    if(!ncname(0)){
                        exiting(RULE_NOTATION_DECL, 5);
                        return false;
                    }
                case 5:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_NOTATION_DECL, 5);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.notationName(buffer.pop(0, 0));
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 6:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_NOTATION_DECL, 6);
                        return false;
                    }
                    if(ch=='P'){
                        if(public_id(0)){
                            state = 8;
                            continue;
                        }else{
                            exiting(RULE_NOTATION_DECL, 8);
                            return false;
                        }
                    }
                    else {
                        if(!system_id(0)){
                            exiting(RULE_NOTATION_DECL, 7);
                            return false;
                        }
                    }
                case 7:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_NOTATION_DECL, 7);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        handler.notationEnd();
                        return true;
                    }
                    else expected(ch, "<WS> OR [>]");
                case 8:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_NOTATION_DECL, 8);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else if(ch=='>'){
                        position++;
                        handler.notationEnd();
                        return true;
                    }
                    else expected(ch, "<WS> OR [>]");
                case 9:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_NOTATION_DECL, 9);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        handler.notationEnd();
                        return true;
                    }
                    else {
                        if(sytem_literal(0)){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_NOTATION_DECL, 7);
                            return false;
                        }
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_EXTERNAL_ID = 30;
    private boolean external_id(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_EXTERNAL_ID, 0);
                    return false;
                }
                if(ch=='P'){
                    if(!public_id(0)){
                        exiting(RULE_EXTERNAL_ID, 1);
                        return false;
                    }
                }
                else {
                    return system_id(0);
                }
            case 1:
                if((ch=codePoint())==EOC){
                    exiting(RULE_EXTERNAL_ID, 1);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                    consume(ch);
                }
                else expected(ch, "<WS>");
            case 2:
                if(finishAll_WS(codePoint())==EOC){
                    exiting(RULE_EXTERNAL_ID, 2);
                    return false;
                }
                return sytem_literal(0);
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_PE_REFERENCE = 31;
    private boolean pe_reference(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_PE_REFERENCE, 0);
                    return false;
                }
                if(ch=='%'){
                    position++;
                }
                else expected(ch, "[%]");
            case 1:
                buffer.push();
                if(!name(0)){
                    exiting(RULE_PE_REFERENCE, 2);
                    return false;
                }
            case 2:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_PE_REFERENCE, 2);
                    return false;
                }
                if(ch==';'){
                    handler.peReference(buffer.pop(0, 0));
                    position++;
                    return !stop;
                }
                else expected(ch, "[;]");
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_NDATA_DECL = 32;
    private boolean ndata_decl(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if(!matchString(RULE_STR_NDATA, 0, STRING_IDS[-RULE_STR_NDATA])){
                    exiting(RULE_NDATA_DECL, 1);
                    return false;
                }
            case 1:
                if((ch=codePoint())==EOC){
                    exiting(RULE_NDATA_DECL, 1);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                    consume(ch);
                }
                else expected(ch, "<WS>");
            case 2:
                if(finishAll_WS(codePoint())==EOC){
                    exiting(RULE_NDATA_DECL, 2);
                    return false;
                }
                buffer.push();
                if(!name(0)){
                    exiting(RULE_NDATA_DECL, 3);
                    return false;
                }
            case 3:
                handler.notationReference(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_PE_DEF = 33;
    private boolean pe_def(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_PE_DEF, 0);
                    return false;
                }
                if(ch=='P'){
                    return external_id(0);
                }
                else if(ch=='S'){
                    return external_id(0);
                }
                else {
                    return entity_value(0);
                }
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_ENTITY_VALUE = 34;
    private boolean entity_value(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENTITY_VALUE, 0);
                        return false;
                    }
                    if(ch=='\''){
                        handler.valueStart();
                        handler.entityValue();
                        position++;
                        state = 2;
                        continue;
                    }
                    else if(ch=='"'){
                        handler.valueStart();
                        handler.entityValue();
                        position++;
                    }
                    else expected(ch, "<Q> OR <DQ>");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENTITY_VALUE, 1);
                        return false;
                    }
                    if(ch=='"'){
                        position++;
                        handler.valueEnd();
                        return true;
                    }
                    else {
                        if(dq_entity_value(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_ENTITY_VALUE, 1);
                            return false;
                        }
                    }
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENTITY_VALUE, 2);
                        return false;
                    }
                    if(ch=='\''){
                        position++;
                        handler.valueEnd();
                        return true;
                    }
                    else {
                        if(q_entity_value(0)){
                            state = 2;
                            continue;
                        }else{
                            exiting(RULE_ENTITY_VALUE, 2);
                            return false;
                        }
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_Q_ENTITY_VALUE = 35;
    private boolean q_entity_value(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=codePoint())==EOC){
                    exiting(RULE_Q_ENTITY_VALUE, 0);
                    return false;
                }
                if(ch!=EOF && ENTITY_Q_CONTENT(ch)){
                    buffer.push();
                    consume(ch);
                }
                else if(ch=='&'){
                    return reference(0);
                }
                else {
                    return pe_reference(0);
                }
            case 1:
                if(finishAll_ENTITY_Q_CONTENT(codePoint())==EOC){
                    exiting(RULE_Q_ENTITY_VALUE, 1);
                    return false;
                }
                handler.rawValue(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_DQ_ENTITY_VALUE = 36;
    private boolean dq_entity_value(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=codePoint())==EOC){
                    exiting(RULE_DQ_ENTITY_VALUE, 0);
                    return false;
                }
                if(ch!=EOF && ENTITY_DQ_CONTENT(ch)){
                    buffer.push();
                    consume(ch);
                }
                else if(ch=='&'){
                    return reference(0);
                }
                else {
                    return pe_reference(0);
                }
            case 1:
                if(finishAll_ENTITY_DQ_CONTENT(codePoint())==EOC){
                    exiting(RULE_DQ_ENTITY_VALUE, 1);
                    return false;
                }
                handler.rawValue(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_ENTITY_DECL = 37;
    private boolean entity_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENTITY_DECL, 0);
                        return false;
                    }
                    if(ch=='<'){
                        position++;
                    }
                    else expected(ch, "[<]");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENTITY_DECL, 1);
                        return false;
                    }
                    if(ch=='!'){
                        position++;
                    }
                    else expected(ch, "[!]");
                case 2:
                    if(!matchString(RULE_STR_ENTITY, 0, STRING_IDS[-RULE_STR_ENTITY])){
                        exiting(RULE_ENTITY_DECL, 3);
                        return false;
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ENTITY_DECL, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 4:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ENTITY_DECL, 4);
                        return false;
                    }
                    if(ch=='%'){
                        position++;
                        state = 8;
                        continue;
                    }
                    else {
                        buffer.push();
                        if(!ncname(0)){
                            exiting(RULE_ENTITY_DECL, 5);
                            return false;
                        }
                    }
                case 5:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ENTITY_DECL, 5);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.entityName(buffer.pop(0, 0));
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 6:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_ENTITY_DECL, 6);
                        return false;
                    }
                    if(!entity_def(0)){
                        exiting(RULE_ENTITY_DECL, 7);
                        return false;
                    }
                case 7:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ENTITY_DECL, 7);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        handler.entityEnd();
                        return true;
                    }
                    else expected(ch, "<WS> OR [>]");
                case 8:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ENTITY_DECL, 8);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 9:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_ENTITY_DECL, 9);
                        return false;
                    }
                    buffer.push();
                    if(!ncname(0)){
                        exiting(RULE_ENTITY_DECL, 10);
                        return false;
                    }
                case 10:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ENTITY_DECL, 10);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.paramEntityName(buffer.pop(0, 0));
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 11:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_ENTITY_DECL, 11);
                        return false;
                    }
                    if(!pe_def(0)){
                        exiting(RULE_ENTITY_DECL, 12);
                        return false;
                    }
                case 12:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ENTITY_DECL, 12);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        handler.paramEntityEnd();
                        return true;
                    }
                    else expected(ch, "<WS> OR [>]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_ENTITY_DEF = 38;
    private boolean entity_def(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_ENTITY_DEF, 0);
                    return false;
                }
                if(ch=='P'){
                    if(!external_id(0)){
                        exiting(RULE_ENTITY_DEF, 1);
                        return false;
                    }
                }
                else if(ch=='S'){
                    if(!external_id(0)){
                        exiting(RULE_ENTITY_DEF, 1);
                        return false;
                    }
                }
                else {
                    return entity_value(0);
                }
            case 1:
                if((ch=codePoint())==EOC){
                    exiting(RULE_ENTITY_DEF, 1);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                    consume(ch);
                }
                else {
                    return true;
                }
            case 2:
                if((ch=finishAll_WS(codePoint()))==EOC){
                    exiting(RULE_ENTITY_DEF, 2);
                    return false;
                }
                if(ch=='N'){
                    return ndata_decl(0);
                }
                else {
                    return true;
                }
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_TOKENIZED_TYPE = 39;
    private boolean tokenized_type(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 0);
                        return false;
                    }
                    if(ch=='E'){
                        if(matchString(RULE_STR_ENTIT, 0, STRING_IDS[-RULE_STR_ENTIT])){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_TOKENIZED_TYPE, 7);
                            return false;
                        }
                    }
                    else if(ch=='I'){
                        position++;
                        state = 2;
                        continue;
                    }
                    else {
                        if(!matchString(RULE_STR_NMTOKEN, 0, STRING_IDS[-RULE_STR_NMTOKEN])){
                            exiting(RULE_TOKENIZED_TYPE, 1);
                            return false;
                        }
                    }
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 1);
                        return false;
                    }
                    if(ch=='S'){
                        position++;
                        handler.nmtokensAttribute();
                        return true;
                    }
                    else {
                        handler.nmtokenAttribute();
                        return true;
                    }
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 2);
                        return false;
                    }
                    if(ch=='D'){
                        position++;
                    }
                    else expected(ch, "[D]");
                case 3:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 3);
                        return false;
                    }
                    if(ch=='R'){
                        position++;
                    }
                    else {
                        handler.idAttribute();
                        return true;
                    }
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 4);
                        return false;
                    }
                    if(ch=='E'){
                        position++;
                    }
                    else expected(ch, "[E]");
                case 5:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 5);
                        return false;
                    }
                    if(ch=='F'){
                        position++;
                    }
                    else expected(ch, "[F]");
                case 6:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 6);
                        return false;
                    }
                    if(ch=='S'){
                        position++;
                        handler.idRefsAttribute();
                        return true;
                    }
                    else {
                        handler.idRefAttribute();
                        return true;
                    }
                case 7:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 7);
                        return false;
                    }
                    if(ch=='Y'){
                        position++;
                        handler.entityAttribute();
                        return true;
                    }
                    else if(ch=='I'){
                        position++;
                    }
                    else expected(ch, "[Y] OR [I]");
                case 8:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 8);
                        return false;
                    }
                    if(ch=='E'){
                        position++;
                    }
                    else expected(ch, "[E]");
                case 9:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TOKENIZED_TYPE, 9);
                        return false;
                    }
                    if(ch=='S'){
                        position++;
                        handler.entitiesAttribute();
                        return true;
                    }
                    else expected(ch, "[S]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_NMTOKEN = 40;
    private boolean nmtoken(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=codePoint())==EOC){
                    exiting(RULE_NMTOKEN, 0);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isName(ch)){
                    consume(ch);
                }
                else expected(ch, "<NAME_PART>");
            case 1:
                if(finishAll_NAME_PART(codePoint())==EOC){
                    exiting(RULE_NMTOKEN, 1);
                    return false;
                }
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_ENUMERATION = 41;
    private boolean enumeration(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ENUMERATION, 0);
                        return false;
                    }
                    if(ch=='('){
                        handler.enumerationAttribute();
                        position++;
                    }
                    else expected(ch, "[(]");
                case 1:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_ENUMERATION, 1);
                        return false;
                    }
                    buffer.push();
                    if(!nmtoken(0)){
                        exiting(RULE_ENUMERATION, 2);
                        return false;
                    }
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ENUMERATION, 2);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.attributeEnumValue(buffer.pop(0, 0));
                        consume(ch);
                        state = 6;
                        continue;
                    }
                    else if(ch=='|'){
                        handler.attributeEnumValue(buffer.pop(0, 0));
                        position++;
                    }
                    else if(ch==')'){
                        handler.attributeEnumValue(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else expected(ch, "<WS> OR [|] OR [)]");
                case 3:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_ENUMERATION, 3);
                        return false;
                    }
                    buffer.push();
                    if(!nmtoken(0)){
                        exiting(RULE_ENUMERATION, 4);
                        return false;
                    }
                case 4:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ENUMERATION, 4);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.attributeEnumValue(buffer.pop(0, 0));
                        consume(ch);
                    }
                    else if(ch=='|'){
                        handler.attributeEnumValue(buffer.pop(0, 0));
                        position++;
                        state = 3;
                        continue;
                    }
                    else if(ch==')'){
                        handler.attributeEnumValue(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else expected(ch, "<WS> OR [|] OR [)]");
                case 5:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ENUMERATION, 5);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 3;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        return true;
                    }
                    else expected(ch, "<WS> OR [|] OR [)]");
                case 6:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ENUMERATION, 6);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 3;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        return true;
                    }
                    else expected(ch, "<WS> OR [|] OR [)]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_MIXED = 42;
    private boolean mixed(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_MIXED, 0);
                        return false;
                    }
                    if(ch=='('){
                        consume(ch);
                    }
                    else expected(ch, "[(]");
                case 1:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_MIXED, 1);
                        return false;
                    }
                    if(ch=='#'){
                        if(matchString(RULE_STR_HASH_PCDATA, 0, STRING_IDS[-RULE_STR_HASH_PCDATA])){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_MIXED, 3);
                            return false;
                        }
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_MIXED, 2);
                            return false;
                        }
                    }
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MIXED, 2);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    else if(ch=='#'){
                        if(!matchString(RULE_STR_HASH_PCDATA, 0, STRING_IDS[-RULE_STR_HASH_PCDATA])){
                            exiting(RULE_MIXED, 3);
                            return false;
                        }
                    }
                    else {
                        if(pe_reference(0)){
                            state = 2;
                            continue;
                        }else{
                            exiting(RULE_MIXED, 2);
                            return false;
                        }
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MIXED, 3);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 6;
                        continue;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 5;
                        continue;
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_MIXED, 3);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]==')'){
                            if(ch=='*'){
                                consume(FROM_LA);
                                state = 4;
                                resetLookAhead();
                                continue;
                            }
                            consume(FROM_LA);
                            resetLookAhead();
                            return true;
                        }
                    }
                    resetLookAhead();
                    if(pe_reference(0)){
                        state = 3;
                        continue;
                    }else{
                        exiting(RULE_MIXED, 3);
                        return false;
                    }
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_MIXED, 4);
                        return false;
                    }
                    if(ch=='*'){
                        position++;
                        return true;
                    }
                    else expected(ch, "[*]");
                case 5:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MIXED, 5);
                        return false;
                    }
                    if((ch=finishAll_WS(ch))==EOC){
                        exiting(RULE_MIXED, 5);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 6;
                        continue;
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_MIXED, 5);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]==')'){
                            if(ch=='*'){
                                consume(FROM_LA);
                                state = 4;
                                resetLookAhead();
                                continue;
                            }
                            consume(FROM_LA);
                            resetLookAhead();
                            return true;
                        }
                    }
                    resetLookAhead();
                    if(pe_reference(0)){
                        state = 3;
                        continue;
                    }else{
                        exiting(RULE_MIXED, 3);
                        return false;
                    }
                case 6:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_MIXED, 6);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(name(0)){
                            state = 8;
                            continue;
                        }else{
                            exiting(RULE_MIXED, 8);
                            return false;
                        }
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_MIXED, 7);
                            return false;
                        }
                    }
                case 7:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MIXED, 7);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 6;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(!name(0)){
                            exiting(RULE_MIXED, 8);
                            return false;
                        }
                    }
                    else {
                        if(pe_reference(0)){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_MIXED, 7);
                            return false;
                        }
                    }
                case 8:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MIXED, 8);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else if(ch=='|'){
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        state = 4;
                        continue;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 8;
                            continue;
                        }else{
                            exiting(RULE_MIXED, 8);
                            return false;
                        }
                    }
                case 9:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_MIXED, 9);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        state = 4;
                        continue;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 8;
                            continue;
                        }else{
                            exiting(RULE_MIXED, 8);
                            return false;
                        }
                    }
                case 10:
                    if(matchString(RULE_STR_HASH_PCDATA, 0, STRING_IDS[-RULE_STR_HASH_PCDATA])){
                        state = 3;
                        continue;
                    }else{
                        exiting(RULE_MIXED, 3);
                        return false;
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_NOTATION_TYPE = 43;
    private boolean notation_type(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    handler.notationAttribute();
                    if(!matchString(RULE_STR_NOTATION, 0, STRING_IDS[-RULE_STR_NOTATION])){
                        exiting(RULE_NOTATION_TYPE, 1);
                        return false;
                    }
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_NOTATION_TYPE, 1);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 2:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_NOTATION_TYPE, 2);
                        return false;
                    }
                    if(ch=='('){
                        position++;
                    }
                    else expected(ch, "<WS> OR [(]");
                case 3:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_NOTATION_TYPE, 3);
                        return false;
                    }
                    buffer.push();
                    if(!name(0)){
                        exiting(RULE_NOTATION_TYPE, 4);
                        return false;
                    }
                case 4:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_NOTATION_TYPE, 4);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.attributeNotationValue(buffer.pop(0, 0));
                        consume(ch);
                        state = 8;
                        continue;
                    }
                    else if(ch=='|'){
                        handler.attributeNotationValue(buffer.pop(0, 0));
                        position++;
                    }
                    else if(ch==')'){
                        handler.attributeNotationValue(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else expected(ch, "<WS> OR [|] OR [)]");
                case 5:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_NOTATION_TYPE, 5);
                        return false;
                    }
                    buffer.push();
                    if(!name(0)){
                        exiting(RULE_NOTATION_TYPE, 6);
                        return false;
                    }
                case 6:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_NOTATION_TYPE, 6);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.attributeNotationValue(buffer.pop(0, 0));
                        consume(ch);
                    }
                    else if(ch=='|'){
                        handler.attributeNotationValue(buffer.pop(0, 0));
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch==')'){
                        handler.attributeNotationValue(buffer.pop(0, 0));
                        position++;
                        return true;
                    }
                    else expected(ch, "<WS> OR [|] OR [)]");
                case 7:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_NOTATION_TYPE, 7);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        return true;
                    }
                    else expected(ch, "<WS> OR [|] OR [)]");
                case 8:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_NOTATION_TYPE, 8);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        return true;
                    }
                    else expected(ch, "<WS> OR [|] OR [)]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_ENUMERATED_TYPE = 44;
    private boolean enumerated_type(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_ENUMERATED_TYPE, 0);
                    return false;
                }
                if(ch=='N'){
                    return notation_type(0);
                }
                else {
                    return enumeration(0);
                }
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_ATT_TYPE = 45;
    private boolean att_type(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ATT_TYPE, 0);
                        return false;
                    }
                    if(ch=='C'){
                        if(matchString(RULE_STR_CDATA, 0, STRING_IDS[-RULE_STR_CDATA])){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_ATT_TYPE, 1);
                            return false;
                        }
                    }
                    if(ch=='('){
                        return enumerated_type(0);
                    }
                    if(ch=='E'){
                        return tokenized_type(0);
                    }
                    if(ch=='I'){
                        return tokenized_type(0);
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_ATT_TYPE, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='N'){
                            if(ch=='O'){
                                resetLookAhead();
                                return enumerated_type(0);
                            }
                            if(ch=='M'){
                                resetLookAhead();
                                return tokenized_type(0);
                            }
                        }
                    }
                    expected(ch, "[C] OR [(] OR [E] OR [I] OR [N][O] OR [N][M]");
                case 1:
                    handler.cdataAttribute();
                    return true;
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_DEFAULT_DECL = 46;
    private boolean default_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_DEFAULT_DECL, 0);
                        return false;
                    }
                    if(ch=='#'){
                        position++;
                        state = 2;
                        continue;
                    }
                    else {
                        if(!value(0)){
                            exiting(RULE_DEFAULT_DECL, 1);
                            return false;
                        }
                    }
                case 1:
                    handler.attributeDefaultValue();
                    return true;
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_DEFAULT_DECL, 2);
                        return false;
                    }
                    if(ch=='R'){
                        if(matchString(RULE_STR_REQUIRED, 0, STRING_IDS[-RULE_STR_REQUIRED])){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_DEFAULT_DECL, 7);
                            return false;
                        }
                    }
                    else if(ch=='I'){
                        if(matchString(RULE_STR_IMPLIED, 0, STRING_IDS[-RULE_STR_IMPLIED])){
                            state = 6;
                            continue;
                        }else{
                            exiting(RULE_DEFAULT_DECL, 6);
                            return false;
                        }
                    }
                    else {
                        if(!matchString(RULE_STR_FIXED, 0, STRING_IDS[-RULE_STR_FIXED])){
                            exiting(RULE_DEFAULT_DECL, 3);
                            return false;
                        }
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_DEFAULT_DECL, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 4:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_DEFAULT_DECL, 4);
                        return false;
                    }
                    if(!value(0)){
                        exiting(RULE_DEFAULT_DECL, 5);
                        return false;
                    }
                case 5:
                    handler.attributeFixedValue();
                    return true;
                case 6:
                    handler.attributeImplied();
                    return true;
                case 7:
                    handler.attributeRequired();
                    return true;
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_ATT_DEF = 47;
    private boolean att_def(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    buffer.push();
                    if(!name(0)){
                        exiting(RULE_ATT_DEF, 1);
                        return false;
                    }
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_DEF, 1);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.dtdAttribute(buffer.pop(0, 0));
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 2:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_ATT_DEF, 2);
                        return false;
                    }
                    if(!att_type(0)){
                        exiting(RULE_ATT_DEF, 3);
                        return false;
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_DEF, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_ATT_DEF, 3);
                            return false;
                        }
                    }
                case 4:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ATT_DEF, 4);
                        return false;
                    }
                    if(ch=='%'){
                        if(!pe_reference(0)){
                            exiting(RULE_ATT_DEF, 5);
                            return false;
                        }
                    }
                    else {
                        return default_decl(0);
                    }
                case 5:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_DEF, 5);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 4;
                        continue;
                    }
                    else if(ch=='%'){
                        if(pe_reference(0)){
                            state = 5;
                            continue;
                        }else{
                            exiting(RULE_ATT_DEF, 5);
                            return false;
                        }
                    }
                    else {
                        return default_decl(0);
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_ATT_LIST_DECL = 48;
    private boolean att_list_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ATT_LIST_DECL, 0);
                        return false;
                    }
                    if(ch=='<'){
                        position++;
                    }
                    else expected(ch, "[<]");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ATT_LIST_DECL, 1);
                        return false;
                    }
                    if(ch=='!'){
                        position++;
                    }
                    else expected(ch, "[!]");
                case 2:
                    if(!matchString(RULE_STR_ATTLIST, 0, STRING_IDS[-RULE_STR_ATTLIST])){
                        exiting(RULE_ATT_LIST_DECL, 3);
                        return false;
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_LIST_DECL, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_ATT_LIST_DECL, 3);
                            return false;
                        }
                    }
                case 4:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ATT_LIST_DECL, 4);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        buffer.push();
                        if(name(0)){
                            state = 6;
                            continue;
                        }else{
                            exiting(RULE_ATT_LIST_DECL, 6);
                            return false;
                        }
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_ATT_LIST_DECL, 5);
                            return false;
                        }
                    }
                case 5:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_LIST_DECL, 5);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 4;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        buffer.push();
                        if(!name(0)){
                            exiting(RULE_ATT_LIST_DECL, 6);
                            return false;
                        }
                    }
                    else {
                        if(pe_reference(0)){
                            state = 5;
                            continue;
                        }else{
                            exiting(RULE_ATT_LIST_DECL, 5);
                            return false;
                        }
                    }
                case 6:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_LIST_DECL, 6);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.dtdAttributesStart(buffer.pop(0, 0));
                        consume(ch);
                        state = 8;
                        continue;
                    }
                    else if(ch=='>'){
                        handler.dtdAttributesStart(buffer.pop(0, 0));
                        position++;
                        handler.dtdAttributesEnd();
                        return true;
                    }
                    else {
                        handler.dtdAttributesStart(buffer.pop(0, 0));
                        if(!pe_reference(0)){
                            exiting(RULE_ATT_LIST_DECL, 7);
                            return false;
                        }
                    }
                case 7:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_LIST_DECL, 7);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_ATT_LIST_DECL, 7);
                            return false;
                        }
                    }
                case 8:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ATT_LIST_DECL, 8);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(att_def(0)){
                            state = 10;
                            continue;
                        }else{
                            exiting(RULE_ATT_LIST_DECL, 10);
                            return false;
                        }
                    }
                    else if(ch=='>'){
                        position++;
                        handler.dtdAttributesEnd();
                        return true;
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_ATT_LIST_DECL, 9);
                            return false;
                        }
                    }
                case 9:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_LIST_DECL, 9);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(!att_def(0)){
                            exiting(RULE_ATT_LIST_DECL, 10);
                            return false;
                        }
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 8;
                        continue;
                    }
                    else if(ch=='>'){
                        position++;
                        handler.dtdAttributesEnd();
                        return true;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 9;
                            continue;
                        }else{
                            exiting(RULE_ATT_LIST_DECL, 9);
                            return false;
                        }
                    }
                case 10:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ATT_LIST_DECL, 10);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        handler.dtdAttributesEnd();
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 8;
                        continue;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_ATT_LIST_DECL, 7);
                            return false;
                        }
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_CHILDREN = 49;
    private boolean children(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_CHILDREN, 0);
                        return false;
                    }
                    if(ch=='('){
                        position++;
                    }
                    else expected(ch, "[(]");
                case 1:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_CHILDREN, 1);
                        return false;
                    }
                    if(ch=='('){
                        if(children(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 3);
                            return false;
                        }
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(name_cardinality(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 3);
                            return false;
                        }
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_CHILDREN, 2);
                            return false;
                        }
                    }
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CHILDREN, 2);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 1;
                        continue;
                    }
                    else if(ch=='('){
                        if(!children(0)){
                            exiting(RULE_CHILDREN, 3);
                            return false;
                        }
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(!name_cardinality(0)){
                            exiting(RULE_CHILDREN, 3);
                            return false;
                        }
                    }
                    else {
                        if(pe_reference(0)){
                            state = 2;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 2);
                            return false;
                        }
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CHILDREN, 3);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 10;
                        continue;
                    }
                    else if(ch==','){
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 3);
                            return false;
                        }
                    }
                case 4:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_CHILDREN, 4);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 10;
                        continue;
                    }
                    else if(ch==','){
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 3);
                            return false;
                        }
                    }
                case 5:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_CHILDREN, 5);
                        return false;
                    }
                    if(ch=='?' || ch=='+' || ch=='*'){
                        position++;
                        return true;
                    }
                    else {
                        return true;
                    }
                case 6:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_CHILDREN, 6);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(name_cardinality(0)){
                            state = 8;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 8);
                            return false;
                        }
                    }
                    else if(ch=='('){
                        if(children(0)){
                            state = 8;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 8);
                            return false;
                        }
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_CHILDREN, 7);
                            return false;
                        }
                    }
                case 7:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CHILDREN, 7);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(!name_cardinality(0)){
                            exiting(RULE_CHILDREN, 8);
                            return false;
                        }
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 6;
                        continue;
                    }
                    else if(ch=='('){
                        if(!children(0)){
                            exiting(RULE_CHILDREN, 8);
                            return false;
                        }
                    }
                    else {
                        if(pe_reference(0)){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 7);
                            return false;
                        }
                    }
                case 8:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CHILDREN, 8);
                        return false;
                    }
                    if(ch==','){
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 8;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 8);
                            return false;
                        }
                    }
                case 9:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_CHILDREN, 9);
                        return false;
                    }
                    if(ch==','){
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        state = 5;
                        continue;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 8;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 8);
                            return false;
                        }
                    }
                case 10:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_CHILDREN, 10);
                        return false;
                    }
                    if(ch=='('){
                        if(children(0)){
                            state = 12;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 12);
                            return false;
                        }
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(name_cardinality(0)){
                            state = 12;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 12);
                            return false;
                        }
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_CHILDREN, 11);
                            return false;
                        }
                    }
                case 11:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CHILDREN, 11);
                        return false;
                    }
                    if(ch=='('){
                        if(!children(0)){
                            exiting(RULE_CHILDREN, 12);
                            return false;
                        }
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 10;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        if(!name_cardinality(0)){
                            exiting(RULE_CHILDREN, 12);
                            return false;
                        }
                    }
                    else {
                        if(pe_reference(0)){
                            state = 11;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 11);
                            return false;
                        }
                    }
                case 12:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CHILDREN, 12);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 10;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        state = 5;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 12;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 12);
                            return false;
                        }
                    }
                case 13:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_CHILDREN, 13);
                        return false;
                    }
                    if(ch=='|'){
                        position++;
                        state = 10;
                        continue;
                    }
                    else if(ch==')'){
                        position++;
                        state = 5;
                        continue;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 12;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 12);
                            return false;
                        }
                    }
                case 14:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_CHILDREN, 14);
                        return false;
                    }
                    if(ch=='('){
                        if(children(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 3);
                            return false;
                        }
                    }
                    else {
                        if(name_cardinality(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_CHILDREN, 3);
                            return false;
                        }
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_NAME_CARDINALITY = 50;
    private boolean name_cardinality(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if(!name(0)){
                    exiting(RULE_NAME_CARDINALITY, 1);
                    return false;
                }
            case 1:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_NAME_CARDINALITY, 1);
                    return false;
                }
                if(ch=='?' || ch=='*' || ch=='+'){
                    position++;
                    return true;
                }
                else {
                    return true;
                }
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_DECL_SEP = 51;
    private boolean decl_sep(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=codePoint())==EOC){
                    exiting(RULE_DECL_SEP, 0);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                    consume(ch);
                }
                else {
                    handler.peReferenceOutsideMarkup();
                    return pe_reference(0);
                }
            case 1:
                if(finishAll_WS(codePoint())==EOC){
                    exiting(RULE_DECL_SEP, 1);
                    return false;
                }
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_MARKUP_DECL = 52;
    private boolean markup_decl(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_MARKUP_DECL, 0);
                    return false;
                }
                addToLookAhead(ch);
                if(ch!=EOF && laLen<2){
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MARKUP_DECL, 0);
                        return false;
                    }
                    addToLookAhead(ch);
                }
                if(laLen==2){
                    if(la[0]=='<'){
                        if(ch=='?'){
                            resetLookAhead();
                            return pi(0);
                        }
                    }
                }
                if(ch!=EOF && laLen<3){
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MARKUP_DECL, 0);
                        return false;
                    }
                    addToLookAhead(ch);
                }
                if(laLen==3){
                    if(la[0]=='<'){
                        if(la[1]=='!'){
                            if(ch=='A'){
                                resetLookAhead();
                                return att_list_decl(0);
                            }
                            if(ch=='N'){
                                resetLookAhead();
                                return notation_decl(0);
                            }
                            if(ch=='-'){
                                resetLookAhead();
                                return comment(0);
                            }
                        }
                    }
                }
                if(ch!=EOF && laLen<4){
                    if((ch=codePoint())==EOC){
                        exiting(RULE_MARKUP_DECL, 0);
                        return false;
                    }
                    addToLookAhead(ch);
                }
                if(laLen==4){
                    if(la[0]=='<'){
                        if(la[1]=='!'){
                            if(la[2]=='E'){
                                if(ch=='L'){
                                    resetLookAhead();
                                    return element_decl(0);
                                }
                                if(ch=='N'){
                                    resetLookAhead();
                                    return entity_decl(0);
                                }
                            }
                        }
                    }
                }
                expected(ch, "[<][?] OR [<][!][A] OR [<][!][N] OR [<][!][\\-] OR [<][!][E][L] OR [<][!][E][N]");
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_ELEMENT_DECL = 53;
    private boolean element_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ELEMENT_DECL, 0);
                        return false;
                    }
                    if(ch=='<'){
                        position++;
                    }
                    else expected(ch, "[<]");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_ELEMENT_DECL, 1);
                        return false;
                    }
                    if(ch=='!'){
                        position++;
                    }
                    else expected(ch, "[!]");
                case 2:
                    if(!matchString(RULE_STR_ELEMENT, 0, STRING_IDS[-RULE_STR_ELEMENT])){
                        exiting(RULE_ELEMENT_DECL, 3);
                        return false;
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEMENT_DECL, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 3;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 3);
                            return false;
                        }
                    }
                case 4:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ELEMENT_DECL, 4);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        buffer.push();
                        if(name(0)){
                            state = 6;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 6);
                            return false;
                        }
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_ELEMENT_DECL, 5);
                            return false;
                        }
                    }
                case 5:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEMENT_DECL, 5);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 4;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isNameStart(ch)){
                        buffer.push();
                        if(!name(0)){
                            exiting(RULE_ELEMENT_DECL, 6);
                            return false;
                        }
                    }
                    else {
                        if(pe_reference(0)){
                            state = 5;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 5);
                            return false;
                        }
                    }
                case 6:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEMENT_DECL, 6);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.dtdElement(buffer.pop(0, 0));
                        consume(ch);
                        state = 8;
                        continue;
                    }
                    else {
                        handler.dtdElement(buffer.pop(0, 0));
                        if(!pe_reference(0)){
                            exiting(RULE_ELEMENT_DECL, 7);
                            return false;
                        }
                    }
                case 7:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEMENT_DECL, 7);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 7;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 7);
                            return false;
                        }
                    }
                case 8:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ELEMENT_DECL, 8);
                        return false;
                    }
                    if(ch=='('){
                        position++;
                        state = 12;
                        continue;
                    }
                    else if(ch=='E'){
                        handler.notMixed();
                        if(matchString(RULE_STR_EMPTY, 0, STRING_IDS[-RULE_STR_EMPTY])){
                            state = 10;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 10);
                            return false;
                        }
                    }
                    else if(ch=='A'){
                        if(matchString(RULE_STR_ANY, 0, STRING_IDS[-RULE_STR_ANY])){
                            state = 10;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 10);
                            return false;
                        }
                    }
                    else {
                        if(!pe_reference(0)){
                            exiting(RULE_ELEMENT_DECL, 9);
                            return false;
                        }
                    }
                case 9:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEMENT_DECL, 9);
                        return false;
                    }
                    if(ch=='('){
                        position++;
                        state = 12;
                        continue;
                    }
                    else if(ch=='E'){
                        handler.notMixed();
                        if(!matchString(RULE_STR_EMPTY, 0, STRING_IDS[-RULE_STR_EMPTY])){
                            exiting(RULE_ELEMENT_DECL, 10);
                            return false;
                        }
                    }
                    else if(ch=='A'){
                        if(!matchString(RULE_STR_ANY, 0, STRING_IDS[-RULE_STR_ANY])){
                            exiting(RULE_ELEMENT_DECL, 10);
                            return false;
                        }
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 8;
                        continue;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 9;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 9);
                            return false;
                        }
                    }
                case 10:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEMENT_DECL, 10);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else {
                        if(pe_reference(0)){
                            state = 10;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 10);
                            return false;
                        }
                    }
                case 11:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ELEMENT_DECL, 11);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        return true;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 10;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 10);
                            return false;
                        }
                    }
                case 12:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_ELEMENT_DECL, 12);
                        return false;
                    }
                    if(ch=='%'){
                        if(pe_reference(0)){
                            state = 14;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 14);
                            return false;
                        }
                    }
                    else if(ch=='#'){
                        if(!mixed(10)){
                            exiting(RULE_ELEMENT_DECL, 13);
                            return false;
                        }
                    }
                    else {
                        handler.notMixed();
                        if(!children(14)){
                            exiting(RULE_ELEMENT_DECL, 13);
                            return false;
                        }
                    }
                case 13:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEMENT_DECL, 13);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        return true;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 11;
                        continue;
                    }
                    else {
                        if(pe_reference(0)){
                            state = 10;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 10);
                            return false;
                        }
                    }
                case 14:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_ELEMENT_DECL, 14);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 12;
                        continue;
                    }
                    else if(ch=='%'){
                        if(pe_reference(0)){
                            state = 14;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 14);
                            return false;
                        }
                    }
                    else if(ch=='#'){
                        if(mixed(10)){
                            state = 13;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 13);
                            return false;
                        }
                    }
                    else {
                        handler.notMixed();
                        if(children(14)){
                            state = 13;
                            continue;
                        }else{
                            exiting(RULE_ELEMENT_DECL, 13);
                            return false;
                        }
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_INT_SUBSET = 54;
    private boolean int_subset(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_INT_SUBSET, 0);
                        return false;
                    }
                    if(ch=='%'){
                        if(decl_sep(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_INT_SUBSET, 1);
                            return false;
                        }
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        if(decl_sep(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_INT_SUBSET, 1);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_INT_SUBSET, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch=='?'){
                                resetLookAhead();
                                if(markup_decl(0)){
                                    state = 1;
                                    continue;
                                }else{
                                    exiting(RULE_INT_SUBSET, 1);
                                    return false;
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<3){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_INT_SUBSET, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==3){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(ch=='A'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_INT_SUBSET, 1);
                                        return false;
                                    }
                                }
                                if(ch=='N'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_INT_SUBSET, 1);
                                        return false;
                                    }
                                }
                                if(ch=='-'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_INT_SUBSET, 1);
                                        return false;
                                    }
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<4){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_INT_SUBSET, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==4){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(la[2]=='E'){
                                    if(ch=='L'){
                                        resetLookAhead();
                                        if(markup_decl(0)){
                                            state = 1;
                                            continue;
                                        }else{
                                            exiting(RULE_INT_SUBSET, 1);
                                            return false;
                                        }
                                    }
                                    if(ch=='N'){
                                        resetLookAhead();
                                        if(markup_decl(0)){
                                            state = 1;
                                            continue;
                                        }else{
                                            exiting(RULE_INT_SUBSET, 1);
                                            return false;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    expected(ch, "[%] OR <WS> OR [<][?] OR [<][!][A] OR [<][!][N] OR [<][!][\\-] OR [<][!][E][L] OR [<][!][E][N]");
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_INT_SUBSET, 1);
                        return false;
                    }
                    if(ch=='%'){
                        if(decl_sep(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_INT_SUBSET, 1);
                            return false;
                        }
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        if(decl_sep(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_INT_SUBSET, 1);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_INT_SUBSET, 1);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch=='?'){
                                resetLookAhead();
                                if(markup_decl(0)){
                                    state = 1;
                                    continue;
                                }else{
                                    exiting(RULE_INT_SUBSET, 1);
                                    return false;
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<3){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_INT_SUBSET, 1);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==3){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(ch=='A'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_INT_SUBSET, 1);
                                        return false;
                                    }
                                }
                                if(ch=='N'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_INT_SUBSET, 1);
                                        return false;
                                    }
                                }
                                if(ch=='-'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_INT_SUBSET, 1);
                                        return false;
                                    }
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<4){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_INT_SUBSET, 1);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==4){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(la[2]=='E'){
                                    if(ch=='L'){
                                        resetLookAhead();
                                        if(markup_decl(0)){
                                            state = 1;
                                            continue;
                                        }else{
                                            exiting(RULE_INT_SUBSET, 1);
                                            return false;
                                        }
                                    }
                                    if(ch=='N'){
                                        resetLookAhead();
                                        if(markup_decl(0)){
                                            state = 1;
                                            continue;
                                        }else{
                                            exiting(RULE_INT_SUBSET, 1);
                                            return false;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    resetLookAhead();
                    return true;
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_DOCTYPE_DECL = 55;
    private boolean doctype_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_DOCTYPE_DECL, 0);
                        return false;
                    }
                    if(ch=='<'){
                        position++;
                    }
                    else expected(ch, "[<]");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_DOCTYPE_DECL, 1);
                        return false;
                    }
                    if(ch=='!'){
                        position++;
                    }
                    else expected(ch, "[!]");
                case 2:
                    if(!matchString(RULE_STR_DOCTYPE, 0, STRING_IDS[-RULE_STR_DOCTYPE])){
                        exiting(RULE_DOCTYPE_DECL, 3);
                        return false;
                    }
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_DOCTYPE_DECL, 3);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 4:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_DOCTYPE_DECL, 4);
                        return false;
                    }
                    buffer.push();
                    if(!name(0)){
                        exiting(RULE_DOCTYPE_DECL, 5);
                        return false;
                    }
                case 5:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_DOCTYPE_DECL, 5);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        handler.dtdRoot(buffer.pop(0, 0));
                        consume(ch);
                        state = 9;
                        continue;
                    }
                    else if(ch=='['){
                        handler.dtdRoot(buffer.pop(0, 0));
                        handler.dtdStart();
                        position++;
                    }
                    else if(ch=='>'){
                        handler.dtdRoot(buffer.pop(0, 0));
                        handler.dtdStart();
                        position++;
                        handler.dtdEnd();
                        return !stop;
                    }
                    else expected(ch, "<WS> OR [\\[] OR [>]");
                case 6:
                    if(!int_subset(0)){
                        exiting(RULE_DOCTYPE_DECL, 7);
                        return false;
                    }
                case 7:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_DOCTYPE_DECL, 7);
                        return false;
                    }
                    if(ch==']'){
                        position++;
                    }
                    else expected(ch, "[\\]]");
                case 8:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_DOCTYPE_DECL, 8);
                        return false;
                    }
                    if(ch=='>'){
                        position++;
                        handler.dtdEnd();
                        return !stop;
                    }
                    else expected(ch, "<WS> OR [>]");
                case 9:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_DOCTYPE_DECL, 9);
                        return false;
                    }
                    if(ch=='['){
                        handler.dtdStart();
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch=='>'){
                        handler.dtdStart();
                        position++;
                        handler.dtdEnd();
                        return !stop;
                    }
                    else {
                        if(!external_id(0)){
                            exiting(RULE_DOCTYPE_DECL, 10);
                            return false;
                        }
                    }
                case 10:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_DOCTYPE_DECL, 10);
                        return false;
                    }
                    if(ch=='['){
                        handler.dtdStart();
                        position++;
                        state = 6;
                        continue;
                    }
                    else if(ch=='>'){
                        handler.dtdStart();
                        position++;
                        handler.dtdEnd();
                        return !stop;
                    }
                    else expected(ch, "<WS> OR [\\[] OR [>]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_DOCUMENT = 56;
    private boolean document(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_DOCUMENT, 0);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        if(misc(0)){
                            state = 0;
                            continue;
                        }else{
                            exiting(RULE_DOCUMENT, 0);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_DOCUMENT, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCNameStart(ch)){
                                resetLookAhead();
                                if(elem(0)){
                                    state = 2;
                                    continue;
                                }else{
                                    exiting(RULE_DOCUMENT, 2);
                                    return false;
                                }
                            }
                            if(ch=='?'){
                                resetLookAhead();
                                if(misc(0)){
                                    state = 0;
                                    continue;
                                }else{
                                    exiting(RULE_DOCUMENT, 0);
                                    return false;
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<3){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_DOCUMENT, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==3){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(ch=='D'){
                                    resetLookAhead();
                                    if(doctype_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_DOCUMENT, 1);
                                        return false;
                                    }
                                }
                                if(ch=='-'){
                                    resetLookAhead();
                                    if(misc(0)){
                                        state = 0;
                                        continue;
                                    }else{
                                        exiting(RULE_DOCUMENT, 0);
                                        return false;
                                    }
                                }
                            }
                        }
                    }
                    expected(ch, "<WS> OR [<]<NCNAME_START> OR [<][?] OR [<][!][D] OR [<][!][\\-]");
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_DOCUMENT, 1);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        if(misc(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_DOCUMENT, 1);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_DOCUMENT, 1);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCNameStart(ch)){
                                resetLookAhead();
                                if(elem(0)){
                                    state = 2;
                                    continue;
                                }else{
                                    exiting(RULE_DOCUMENT, 2);
                                    return false;
                                }
                            }
                            if(ch=='!'){
                                resetLookAhead();
                                if(misc(0)){
                                    state = 1;
                                    continue;
                                }else{
                                    exiting(RULE_DOCUMENT, 1);
                                    return false;
                                }
                            }
                            if(ch=='?'){
                                resetLookAhead();
                                if(misc(0)){
                                    state = 1;
                                    continue;
                                }else{
                                    exiting(RULE_DOCUMENT, 1);
                                    return false;
                                }
                            }
                        }
                    }
                    expected(ch, "<WS> OR [<]<NCNAME_START> OR [<][!] OR [<][?]");
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_DOCUMENT, 2);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        if(misc(0)){
                            state = 2;
                            continue;
                        }else{
                            exiting(RULE_DOCUMENT, 2);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_DOCUMENT, 2);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch=='!'){
                                resetLookAhead();
                                if(misc(0)){
                                    state = 2;
                                    continue;
                                }else{
                                    exiting(RULE_DOCUMENT, 2);
                                    return false;
                                }
                            }
                            if(ch=='?'){
                                resetLookAhead();
                                if(misc(0)){
                                    state = 2;
                                    continue;
                                }else{
                                    exiting(RULE_DOCUMENT, 2);
                                    return false;
                                }
                            }
                        }
                    }
                    resetLookAhead();
                    return true;
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_INT_ELEM_CONTENT = 57;
    private boolean int_elem_content(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_INT_ELEM_CONTENT, 0);
                        return false;
                    }
                    if(ch==']'){
                        if(elem_content(0)){
                            state = 0;
                            continue;
                        }else{
                            exiting(RULE_INT_ELEM_CONTENT, 0);
                            return false;
                        }
                    }
                    if(ch=='&'){
                        if(elem_content(0)){
                            state = 0;
                            continue;
                        }else{
                            exiting(RULE_INT_ELEM_CONTENT, 0);
                            return false;
                        }
                    }
                    if(ch!=EOF && ELEM_CONTENT_CHAR(ch)){
                        if(elem_content(0)){
                            state = 0;
                            continue;
                        }else{
                            exiting(RULE_INT_ELEM_CONTENT, 0);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_INT_ELEM_CONTENT, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch!=EOF && org.apache.xerces.util.XMLChar.isNCNameStart(ch)){
                                resetLookAhead();
                                if(elem_content(0)){
                                    state = 0;
                                    continue;
                                }else{
                                    exiting(RULE_INT_ELEM_CONTENT, 0);
                                    return false;
                                }
                            }
                            if(ch=='?'){
                                resetLookAhead();
                                if(elem_content(0)){
                                    state = 0;
                                    continue;
                                }else{
                                    exiting(RULE_INT_ELEM_CONTENT, 0);
                                    return false;
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<3){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_INT_ELEM_CONTENT, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==3){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(ch=='-'){
                                    resetLookAhead();
                                    if(elem_content(0)){
                                        state = 0;
                                        continue;
                                    }else{
                                        exiting(RULE_INT_ELEM_CONTENT, 0);
                                        return false;
                                    }
                                }
                                if(ch=='['){
                                    resetLookAhead();
                                    if(elem_content(0)){
                                        state = 0;
                                        continue;
                                    }else{
                                        exiting(RULE_INT_ELEM_CONTENT, 0);
                                        return false;
                                    }
                                }
                            }
                        }
                    }
                    resetLookAhead();
                    return true;
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_TEXT_DECL = 58;
    private boolean text_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if(!matchString(RULE_STR_XML, 0, STRING_IDS[-RULE_STR_XML])){
                        exiting(RULE_TEXT_DECL, 1);
                        return false;
                    }
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_TEXT_DECL, 1);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 2:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_TEXT_DECL, 2);
                        return false;
                    }
                    if(ch=='v'){
                        if(version_info(0)){
                            state = 5;
                            continue;
                        }else{
                            exiting(RULE_TEXT_DECL, 5);
                            return false;
                        }
                    }
                    else {
                        if(!enc_decl(0)){
                            exiting(RULE_TEXT_DECL, 3);
                            return false;
                        }
                    }
                case 3:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_TEXT_DECL, 3);
                        return false;
                    }
                    if(ch=='?'){
                        position++;
                    }
                    else expected(ch, "<WS> OR [?]");
                case 4:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_TEXT_DECL, 4);
                        return false;
                    }
                    if(ch=='>'){
                        handler.xdeclEnd();
                        position++;
                        return true;
                    }
                    else expected(ch, "[>]");
                case 5:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_TEXT_DECL, 5);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                    }
                    else expected(ch, "<WS>");
                case 6:
                    if(finishAll_WS(codePoint())==EOC){
                        exiting(RULE_TEXT_DECL, 6);
                        return false;
                    }
                    if(enc_decl(0)){
                        state = 3;
                        continue;
                    }else{
                        exiting(RULE_TEXT_DECL, 3);
                        return false;
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_IGNORE_SECT = 59;
    private boolean ignore_sect(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if(!matchString(RULE_STR_IGNORE, 0, STRING_IDS[-RULE_STR_IGNORE])){
                        exiting(RULE_IGNORE_SECT, 1);
                        return false;
                    }
                case 1:
                    if((ch=finishAll_WS(codePoint()))==EOC){
                        exiting(RULE_IGNORE_SECT, 1);
                        return false;
                    }
                    if(ch=='['){
                        consume(ch);
                    }
                    else expected(ch, "<WS> OR [\\[]");
                case 2:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_IGNORE_SECT, 2);
                        return false;
                    }
                    if(ch==']'){
                        consume(ch);
                        state = 7;
                        continue;
                    }
                    else if(ch=='<'){
                        consume(ch);
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "[\\]] OR [<] OR <CHAR>");
                case 3:
                    if((ch=finishAll(codePoint(), '<'))==EOC){
                        exiting(RULE_IGNORE_SECT, 3);
                        return false;
                    }
                    if(ch=='!'){
                        consume(ch);
                    }
                    else if(ch==']'){
                        consume(ch);
                        state = 7;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "[<] OR [!] OR [\\]] OR <CHAR>");
                case 4:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_IGNORE_SECT, 4);
                        return false;
                    }
                    if(ch=='['){
                        consume(ch);
                    }
                    else if(ch==']'){
                        consume(ch);
                        state = 7;
                        continue;
                    }
                    else if(ch=='<'){
                        consume(ch);
                        state = 3;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "[\\[] OR [\\]] OR [<] OR <CHAR>");
                case 5:
                    if(!ignore_sect(9)){
                        exiting(RULE_IGNORE_SECT, 6);
                        return false;
                    }
                case 6:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_IGNORE_SECT, 6);
                        return false;
                    }
                    if(ch==']'){
                        consume(ch);
                    }
                    else if(ch=='<'){
                        consume(ch);
                        state = 3;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "[\\]] OR [<] OR <CHAR>");
                case 7:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_IGNORE_SECT, 7);
                        return false;
                    }
                    if(ch==']'){
                        consume(ch);
                    }
                    else if(ch=='<'){
                        consume(ch);
                        state = 3;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "[\\]] OR [<] OR <CHAR>");
                case 8:
                    if((ch=finishAll(codePoint(), ']'))==EOC){
                        exiting(RULE_IGNORE_SECT, 8);
                        return false;
                    }
                    if(ch=='>'){
                        consume(ch);
                        return true;
                    }
                    else if(ch=='<'){
                        consume(ch);
                        state = 3;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "[\\]] OR [>] OR [<] OR <CHAR>");
                case 9:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_IGNORE_SECT, 9);
                        return false;
                    }
                    if(ch==']'){
                        consume(ch);
                        state = 7;
                        continue;
                    }
                    else if(ch=='<'){
                        consume(ch);
                        state = 3;
                        continue;
                    }
                    else if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else expected(ch, "[\\]] OR [<] OR <CHAR>");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_EXT_SUBSET_DECL = 60;
    private boolean ext_subset_decl(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_EXT_SUBSET_DECL, 0);
                        return false;
                    }
                    if(ch=='%'){
                        if(decl_sep(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_EXT_SUBSET_DECL, 1);
                            return false;
                        }
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        if(decl_sep(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_EXT_SUBSET_DECL, 1);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_EXT_SUBSET_DECL, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch=='?'){
                                resetLookAhead();
                                if(markup_decl(0)){
                                    state = 1;
                                    continue;
                                }else{
                                    exiting(RULE_EXT_SUBSET_DECL, 1);
                                    return false;
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<3){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_EXT_SUBSET_DECL, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==3){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(ch=='A'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_EXT_SUBSET_DECL, 1);
                                        return false;
                                    }
                                }
                                if(ch=='N'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_EXT_SUBSET_DECL, 1);
                                        return false;
                                    }
                                }
                                if(ch=='-'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_EXT_SUBSET_DECL, 1);
                                        return false;
                                    }
                                }
                                if(ch=='['){
                                    resetLookAhead();
                                    if(conditional_sect(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_EXT_SUBSET_DECL, 1);
                                        return false;
                                    }
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<4){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_EXT_SUBSET_DECL, 0);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==4){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(la[2]=='E'){
                                    if(ch=='L'){
                                        resetLookAhead();
                                        if(markup_decl(0)){
                                            state = 1;
                                            continue;
                                        }else{
                                            exiting(RULE_EXT_SUBSET_DECL, 1);
                                            return false;
                                        }
                                    }
                                    if(ch=='N'){
                                        resetLookAhead();
                                        if(markup_decl(0)){
                                            state = 1;
                                            continue;
                                        }else{
                                            exiting(RULE_EXT_SUBSET_DECL, 1);
                                            return false;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    resetLookAhead();
                    return true;
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_EXT_SUBSET_DECL, 1);
                        return false;
                    }
                    if(ch=='%'){
                        if(decl_sep(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_EXT_SUBSET_DECL, 1);
                            return false;
                        }
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        if(decl_sep(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_EXT_SUBSET_DECL, 1);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_EXT_SUBSET_DECL, 1);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='<'){
                            if(ch=='?'){
                                resetLookAhead();
                                if(markup_decl(0)){
                                    state = 1;
                                    continue;
                                }else{
                                    exiting(RULE_EXT_SUBSET_DECL, 1);
                                    return false;
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<3){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_EXT_SUBSET_DECL, 1);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==3){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(ch=='A'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_EXT_SUBSET_DECL, 1);
                                        return false;
                                    }
                                }
                                if(ch=='N'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_EXT_SUBSET_DECL, 1);
                                        return false;
                                    }
                                }
                                if(ch=='-'){
                                    resetLookAhead();
                                    if(markup_decl(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_EXT_SUBSET_DECL, 1);
                                        return false;
                                    }
                                }
                                if(ch=='['){
                                    resetLookAhead();
                                    if(conditional_sect(0)){
                                        state = 1;
                                        continue;
                                    }else{
                                        exiting(RULE_EXT_SUBSET_DECL, 1);
                                        return false;
                                    }
                                }
                            }
                        }
                    }
                    if(ch!=EOF && laLen<4){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_EXT_SUBSET_DECL, 1);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==4){
                        if(la[0]=='<'){
                            if(la[1]=='!'){
                                if(la[2]=='E'){
                                    if(ch=='L'){
                                        resetLookAhead();
                                        if(markup_decl(0)){
                                            state = 1;
                                            continue;
                                        }else{
                                            exiting(RULE_EXT_SUBSET_DECL, 1);
                                            return false;
                                        }
                                    }
                                    if(ch=='N'){
                                        resetLookAhead();
                                        if(markup_decl(0)){
                                            state = 1;
                                            continue;
                                        }else{
                                            exiting(RULE_EXT_SUBSET_DECL, 1);
                                            return false;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    resetLookAhead();
                    return true;
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_CONDITIONAL_SECT = 61;
    private boolean conditional_sect(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_CONDITIONAL_SECT, 0);
                        return false;
                    }
                    if(ch=='<'){
                        consume(ch);
                    }
                    else expected(ch, "[<]");
                case 1:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_CONDITIONAL_SECT, 1);
                        return false;
                    }
                    if(ch=='!'){
                        consume(ch);
                    }
                    else expected(ch, "[!]");
                case 2:
                    if((ch=position==limit ? marker : input[position])==EOC){
                        exiting(RULE_CONDITIONAL_SECT, 2);
                        return false;
                    }
                    if(ch=='['){
                        consume(ch);
                    }
                    else expected(ch, "[\\[]");
                case 3:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CONDITIONAL_SECT, 3);
                        return false;
                    }
                    if((ch=finishAll_WS(ch))==EOC){
                        exiting(RULE_CONDITIONAL_SECT, 3);
                        return false;
                    }
                    if(ch=='%'){
                        if(pe_reference(0)){
                            state = 4;
                            continue;
                        }else{
                            exiting(RULE_CONDITIONAL_SECT, 4);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_CONDITIONAL_SECT, 3);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='I'){
                            if(ch=='G'){
                                resetLookAhead();
                                return ignore_sect(0);
                            }
                            if(ch=='N'){
                                resetLookAhead();
                                return include_sect(0);
                            }
                        }
                    }
                    expected(ch, "<WS> OR [%] OR [I][G] OR [I][N]");
                case 4:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_CONDITIONAL_SECT, 4);
                        return false;
                    }
                    if(ch!=EOF && org.apache.xerces.util.XMLChar.isSpace(ch)){
                        consume(ch);
                        state = 3;
                        continue;
                    }
                    if(ch=='%'){
                        if(pe_reference(0)){
                            state = 4;
                            continue;
                        }else{
                            exiting(RULE_CONDITIONAL_SECT, 4);
                            return false;
                        }
                    }
                    addToLookAhead(ch);
                    if(ch!=EOF && laLen<2){
                        if((ch=codePoint())==EOC){
                            exiting(RULE_CONDITIONAL_SECT, 4);
                            return false;
                        }
                        addToLookAhead(ch);
                    }
                    if(laLen==2){
                        if(la[0]=='I'){
                            if(ch=='G'){
                                resetLookAhead();
                                return ignore_sect(0);
                            }
                            if(ch=='N'){
                                resetLookAhead();
                                return include_sect(0);
                            }
                        }
                    }
                    expected(ch, "<WS> OR [%] OR [I][G] OR [I][N]");
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    public static final int RULE_INCLUDE_SECT = 62;
    private boolean include_sect(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if(!matchString(RULE_STR_INCLUDE, 0, STRING_IDS[-RULE_STR_INCLUDE])){
                    exiting(RULE_INCLUDE_SECT, 1);
                    return false;
                }
            case 1:
                if((ch=finishAll_WS(codePoint()))==EOC){
                    exiting(RULE_INCLUDE_SECT, 1);
                    return false;
                }
                if(ch=='['){
                    consume(ch);
                }
                else expected(ch, "<WS> OR [\\[]");
            case 2:
                if(!ext_subset_decl(0)){
                    exiting(RULE_INCLUDE_SECT, 3);
                    return false;
                }
            case 3:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_INCLUDE_SECT, 3);
                    return false;
                }
                if(ch==']'){
                    consume(ch);
                }
                else expected(ch, "[\\]]");
            case 4:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_INCLUDE_SECT, 4);
                    return false;
                }
                if(ch==']'){
                    consume(ch);
                }
                else expected(ch, "[\\]]");
            case 5:
                if((ch=position==limit ? marker : input[position])==EOC){
                    exiting(RULE_INCLUDE_SECT, 5);
                    return false;
                }
                if(ch=='>'){
                    consume(ch);
                    return true;
                }
                else expected(ch, "[>]");
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_EXTERNAL_ENTITY_VALUE = 63;
    private boolean external_entity_value(int state) throws Exception{
        int ch;
        switch(state){
            case 0:
                if((ch=codePoint())==EOC){
                    exiting(RULE_EXTERNAL_ENTITY_VALUE, 0);
                    return false;
                }
                if(ch!=EOF && org.apache.xerces.util.XMLChar.isValid(ch)){
                    buffer.push();
                    consume(ch);
                }
                else {
                    buffer.push();
                    handler.externalEntityValue(buffer.pop(0, 0));
                    return true;
                }
            case 1:
                if(finishAll_CHAR(codePoint())==EOC){
                    exiting(RULE_EXTERNAL_ENTITY_VALUE, 1);
                    return false;
                }
                handler.externalEntityValue(buffer.pop(0, 0));
                return true;
            default:
                throw new Error("impossible state: "+state);
        }
    }

    public static final int RULE_INT_VALUE = 64;
    private boolean int_value(int state) throws Exception{
        int ch;
        while(true){
            switch(state){
                case 0:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_INT_VALUE, 0);
                        return false;
                    }
                    if(ch!=EOF && ELEM_CONTENT_CHAR(ch)){
                        buffer.push();
                        consume(ch);
                        state = 2;
                        continue;
                    }
                    else if(ch=='&'){
                        if(!reference(0)){
                            exiting(RULE_INT_VALUE, 1);
                            return false;
                        }
                    }
                    else {
                        return true;
                    }
                case 1:
                    if((ch=codePoint())==EOC){
                        exiting(RULE_INT_VALUE, 1);
                        return false;
                    }
                    if(ch!=EOF && ELEM_CONTENT_CHAR(ch)){
                        buffer.push();
                        consume(ch);
                    }
                    else if(ch=='&'){
                        if(reference(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_INT_VALUE, 1);
                            return false;
                        }
                    }
                    else {
                        return true;
                    }
                case 2:
                    if((ch=finishAll_ELEM_CONTENT_CHAR(codePoint()))==EOC){
                        exiting(RULE_INT_VALUE, 2);
                        return false;
                    }
                    if(ch=='&'){
                        handler.rawValue(buffer.pop(0, 0));
                        if(reference(0)){
                            state = 1;
                            continue;
                        }else{
                            exiting(RULE_INT_VALUE, 1);
                            return false;
                        }
                    }
                    else {
                        handler.rawValue(buffer.pop(0, 0));
                        return true;
                    }
                default:
                    throw new Error("impossible state: "+state);
            }
        }
    }

    private int finishAll_WS(int ch) throws IOException{
        while(ch>=0 && org.apache.xerces.util.XMLChar.isSpace(ch)){
            consume(ch);
            ch = codePoint();
        }
        return ch;
    }

    private int finishAll_ENCODING_PART() throws IOException{
        int _position = position;
        while(position<limit && ENCODING_PART(input[position]))
            ++position;
        int len = position-_position;
        if(len>0 && buffer.isBuffering())
            buffer.append(input, _position, len);
        return codePoint();
    }

    private int finishAll_DIGIT() throws IOException{
        int _position = position;
        while(position<limit && DIGIT(input[position]))
            ++position;
        int len = position-_position;
        if(len>0 && buffer.isBuffering())
            buffer.append(input, _position, len);
        return codePoint();
    }

    private int finishAll_NAME_PART(int ch) throws IOException{
        while(ch>=0 && org.apache.xerces.util.XMLChar.isName(ch)){
            consume(ch);
            ch = codePoint();
        }
        return ch;
    }

    private int finishAll_NCNAME_PART() throws IOException{
        int _position = position;
        while(position<limit && org.apache.xerces.util.XMLChar.isNCName(input[position]))
            ++position;
        int len = position-_position;
        if(len>0 && buffer.isBuffering())
            buffer.append(input, _position, len);
        return codePoint();
    }

    private int finishAll_HEX_DIGIT() throws IOException{
        int _position = position;
        while(position<limit && HEX_DIGIT(input[position]))
            ++position;
        int len = position-_position;
        if(len>0 && buffer.isBuffering())
            buffer.append(input, _position, len);
        return codePoint();
    }

    private int finishAll_ATTR_Q_CONTENT(int ch) throws IOException{
        while(ch>=0 && ATTR_Q_CONTENT(ch)){
            consume(ch);
            ch = codePoint();
        }
        return ch;
    }

    private int finishAll_ATTR_DQ_CONTENT(int ch) throws IOException{
        while(ch>=0 && ATTR_DQ_CONTENT(ch)){
            consume(ch);
            ch = codePoint();
        }
        return ch;
    }

    private int finishAll_ENTITY_Q_CONTENT(int ch) throws IOException{
        while(ch>=0 && ENTITY_Q_CONTENT(ch)){
            consume(ch);
            ch = codePoint();
        }
        return ch;
    }

    private int finishAll_ENTITY_DQ_CONTENT(int ch) throws IOException{
        while(ch>=0 && ENTITY_DQ_CONTENT(ch)){
            consume(ch);
            ch = codePoint();
        }
        return ch;
    }

    private int finishAll_CHAR(int ch) throws IOException{
        while(ch>=0 && org.apache.xerces.util.XMLChar.isValid(ch)){
            consume(ch);
            ch = codePoint();
        }
        return ch;
    }

    private int finishAll_ELEM_CONTENT_CHAR(int ch) throws IOException{
        while(ch>=0 && ELEM_CONTENT_CHAR(ch)){
            consume(ch);
            ch = codePoint();
        }
        return ch;
    }

    @Override
    protected final boolean callRule(int rule, int state) throws Exception{
        if(SHOW_STATS)
            callRuleCount++;
        if(rule<0){
            if(rule==RULE_DYNAMIC_STRING_MATCH)
                return matchString(state, dynamicStringToBeMatched);
            else
                return matchString(rule, state, STRING_IDS[-rule]);
        }
        switch(rule){
            case 0:
                return eq(state);
            case 1:
                return yes_no(state);
            case 2:
                return sd_decl(state);
            case 3:
                return enc_name(state);
            case 4:
                return enc_decl(state);
            case 5:
                return version_num(state);
            case 6:
                return version_info(state);
            case 7:
                return comment(state);
            case 8:
                return cdata_end(state);
            case 9:
                return cdata(state);
            case 10:
                return name(state);
            case 11:
                return pi_target(state);
            case 12:
                return pi(state);
            case 13:
                return ncname(state);
            case 14:
                return qname(state);
            case 15:
                return reference(state);
            case 16:
                return attr(state);
            case 17:
                return value(state);
            case 18:
                return q_value(state);
            case 19:
                return dq_value(state);
            case 20:
                return elem_attrs(state);
            case 21:
                return elem_content(state);
            case 22:
                return elem(state);
            case 23:
                return xdecl(state);
            case 24:
                return misc(state);
            case 25:
                return sytem_literal(state);
            case 26:
                return pubid_literal(state);
            case 27:
                return system_id(state);
            case 28:
                return public_id(state);
            case 29:
                return notation_decl(state);
            case 30:
                return external_id(state);
            case 31:
                return pe_reference(state);
            case 32:
                return ndata_decl(state);
            case 33:
                return pe_def(state);
            case 34:
                return entity_value(state);
            case 35:
                return q_entity_value(state);
            case 36:
                return dq_entity_value(state);
            case 37:
                return entity_decl(state);
            case 38:
                return entity_def(state);
            case 39:
                return tokenized_type(state);
            case 40:
                return nmtoken(state);
            case 41:
                return enumeration(state);
            case 42:
                return mixed(state);
            case 43:
                return notation_type(state);
            case 44:
                return enumerated_type(state);
            case 45:
                return att_type(state);
            case 46:
                return default_decl(state);
            case 47:
                return att_def(state);
            case 48:
                return att_list_decl(state);
            case 49:
                return children(state);
            case 50:
                return name_cardinality(state);
            case 51:
                return decl_sep(state);
            case 52:
                return markup_decl(state);
            case 53:
                return element_decl(state);
            case 54:
                return int_subset(state);
            case 55:
                return doctype_decl(state);
            case 56:
                return document(state);
            case 57:
                return int_elem_content(state);
            case 58:
                return text_decl(state);
            case 59:
                return ignore_sect(state);
            case 60:
                return ext_subset_decl(state);
            case 61:
                return conditional_sect(state);
            case 62:
                return include_sect(state);
            case 63:
                return external_entity_value(state);
            case 64:
                return int_value(state);
            default:
                throw new Error("impossible rule: "+stack[free-2]);
        }
    }

    @Override
    public void onSuccessful() throws Exception{
        handler.onSuccessful();
    }

    @Override
    public void fatalError(String message) throws Exception{
        handler.fatalError(message);
    }

    protected final jlibs.xml.sax.async.AsyncXMLReader handler;
    public XMLScanner(jlibs.xml.sax.async.AsyncXMLReader handler, int startingRule){
        super(4, startingRule);
        this.handler = handler;
    }
}
